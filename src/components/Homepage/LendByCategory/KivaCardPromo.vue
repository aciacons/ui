<template>
	<div class="row kiva-card-promo">
		<div class="small-12 large-4 columns">
			<!-- eslint-disable max-len -->
			<!-- pink kiva card -->
			<svg class="kiva-card-promo__card1" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 219 159">
				<defs />
				<path d="M198.88 158.75H19.58A19.35 19.35 0 01.25 139.4V43.94A19.35 19.35 0 0119.59 24.6h179.3a19.35 19.35 0 0119.35 19.35v95.46a19.35 19.35 0 01-19.36 19.35z" fill="#FF7B7A" />
				<path d="M143.64 126a4.63 4.63 0 10-9.25 0 4.63 4.63 0 009.25 0zM193.08 126a4.63 4.63 0 10-9.25 0 4.63 4.63 0 009.25 0zM153.23 126.88a10.5 10.5 0 1021.01 0h-21.01z" fill="#2E495D" />
				<path d="M153.23 126.88a10.5 10.5 0 1021.01 0h-21.01z" fill="#CD4A3D" />
				<path d="M109.23 24.6s16.14-27.94 27.31-17.8c11.18 10.14-27.3 17.8-27.3 17.8zM127.65 53.15s-18.42-8.07-18.42-28.56" stroke="#2E495D" stroke-width="7.83" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M109.23 24.6S93.1-3.35 81.94 6.8c-11.18 10.14 27.3 17.8 27.3 17.8zM90.82 53.15s18.41-8.07 18.41-28.56" stroke="#2E495D" stroke-width="7.83" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M17 47.17v-9.54c0-.49-.02-.46.45-.46h3.66c.1 0 .16.06.16.16V56.78c0 .43 0 .43-.41.43H17.2c-.12 0-.2-.06-.2-.2v-.29-9.55zM22.76 50.43c1.44.03 2.82.28 4.12.93a7.22 7.22 0 013.98 5.59c.02.22 0 .25-.2.26a9.92 9.92 0 01-4.82-.95 7.27 7.27 0 01-3.94-5.34c-.1-.46-.06-.49.41-.49h.45zM22.7 49.74h-.63c-.15 0-.2-.08-.2-.22.03-.26.1-.5.17-.75a7.76 7.76 0 016.16-5.45c.75-.15 1.52-.2 2.3-.18.27 0 .29.02.24.3a7.3 7.3 0 01-1.31 3 7.72 7.72 0 01-5.13 3.16c-.51.09-1.03.15-1.6.14z" fill="#fff" />
				<path d="M143.65 125.93a4.63 4.63 0 10-9.26 0 4.63 4.63 0 009.26 0zM193.16 125.93a4.63 4.63 0 10-9.26 0 4.63 4.63 0 009.26 0zM153.25 126.8a10.52 10.52 0 1021.05 0h-21.05z" fill="#2E495D" />
				<mask id="card-a" maskUnits="userSpaceOnUse" x="153" y="126" width="22" height="12">
					<path d="M153.25 126.8a10.52 10.52 0 1021.05 0h-21.05z" fill="#264052" />
				</mask>
				<g mask="url(#card-a)">
					<path d="M153.25 142.59h21.05a10.52 10.52 0 10-21.05 0z" fill="#CD4A3D" />
				</g>
			</svg>

			<!-- snowflake kiva card -->
			<svg class="kiva-card-promo__card2" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 233 145">
				<path d="M212.26 144.15l-191.4.08A20.65 20.65 0 01.22 123.6L.16 21.69c0-11.4 9.24-20.66 20.65-20.66L212.2.95c11.4 0 20.65 9.24 20.66 20.65l.04 101.9c0 11.4-9.24 20.65-20.65 20.65z" fill="#385369" />
				<path d="M18.07 25.14v-10.2c0-.52-.03-.48.47-.49h3.9c.11 0 .17.06.18.17v.28l.01 20.49c0 .45 0 .45-.45.45H18.28c-.13 0-.21-.06-.2-.2v-.31l-.01-10.2zM24.21 28.6c1.53.04 3.02.3 4.4 1a7.71 7.71 0 014.26 5.96c.02.23 0 .27-.22.27-1.79.04-3.54-.18-5.15-1a7.75 7.75 0 01-4.2-5.7c-.1-.5-.07-.52.44-.53h.47zM24.14 27.87h-.67c-.16 0-.22-.08-.2-.24a8.28 8.28 0 016.75-6.61c.8-.16 1.62-.22 2.44-.2.3 0 .31.02.26.32a7.82 7.82 0 01-1.4 3.2 8.25 8.25 0 01-5.46 3.38c-.55.1-1.1.16-1.72.15z" fill="#fff" />
				<path d="M116.47 18.9l.05 107.4M129.94 25.6l-13.42 13.43L103.1 25.6" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M129.95 39.02l-13.42 13.43-13.43-13.42M103.13 119.58l13.42-13.42 13.43 13.41M103.13 106.16l13.42-13.43 13.43 13.42M116.47 18.9l.05 107.4" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M129.94 25.6l-13.42 13.43L103.1 25.6" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M129.95 39.02l-13.42 13.43-13.43-13.42M103.13 119.58l13.42-13.42 13.43 13.41M103.13 106.16l13.42-13.43 13.43 13.42M170.24 72.53l-107.4.04M163.53 86L150.1 72.58l13.42-13.43M150.1 86l-13.42-13.42 13.41-13.43M69.55 59.19L82.98 72.6 69.55 86.04" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M82.97 59.18L96.4 72.6 82.98 86.03M170.24 72.53l-107.4.04M163.53 86L150.1 72.58l13.42-13.43M150.1 86l-13.42-13.42 13.41-13.43" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M69.55 59.19L82.98 72.6 69.55 86.04" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M82.97 59.18L96.4 72.6 82.98 86.03M154.46 34.57l-75.9 75.98M159.25 48.84l-18.99.01V29.86M149.76 58.34h-18.99V39.37M73.83 96.34H92.8l.01 18.98M83.32 86.84h18.98l.01 18.98M154.46 34.57l-75.9 75.98" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M159.25 48.84l-18.99.01V29.86M149.76 58.34h-18.99V39.37M73.83 96.34H92.8l.01 18.98M83.32 86.84h18.98l.01 18.98M154.55 110.52L78.58 34.6M140.29 115.3l-.01-18.98 18.98-.01M130.79 105.81V86.82h18.98M92.79 29.88v18.99H73.82M102.28 39.37l.01 18.99H83.31M154.55 110.52L78.58 34.6" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M140.29 115.3l-.01-18.98 18.98-.01M130.79 105.81V86.82h18.98M92.79 29.88v18.99H73.82M102.28 39.37l.01 18.99H83.31" stroke="#fff" stroke-width="5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
			</svg>
		<!-- eslint-enable max-len -->
		</div>

		<div class="small-12 large-7 columns">
			<h2 class="kiva-card-promo__header">
				Share the loveÔ∏è with Kiva Cards
			</h2>
			<div class="kiva-card-promo__body" v-html="bodyCopy"></div>
			<!-- TODO tracking -->
			<kv-button
				to="/gifts/kiva-cards"
				class="rounded"
				v-kv-track-event="[
					'Homepage',
					'click-share-the-love',
					'Previous'
				]"
			>
				Share the love
			</kv-button>
		</div>
	</div>
</template>

<script>
import KvButton from '@/components/Kv/KvButton';
import contentful from '@/graphql/query/contentful.graphql';
import { formatContentType } from '@/util/contentfulUtils';
import { documentToHtmlString } from '~/@contentful/rich-text-html-renderer';

export default {
	components: {
		KvButton
	},
	inject: ['apollo'],
	apollo: {
		query: contentful,
		preFetchVariables() {
			return {
				contentType: 'genericContentBlock',
				contentKey: 'homepage-kiva-card-campaign-block'
			};
		},
		variables() {
			return {
				contentType: 'genericContentBlock',
				contentKey: 'homepage-kiva-card-campaign-block'
			};
		},
		result({ data }) {
			const message = data?.contentful?.entries?.items[0];
			const body = formatContentType(message, 'genericContentBlock');
			if (body) {
				this.bodyCopy = documentToHtmlString(body.bodyCopy);
			}
		},
	},
	data() {
		return {
			bodyCopy: '',
		};
	}
};
</script>

<style lang="scss" scoped>
@import 'settings';

.kiva-card-promo {
	&__header {
		font-weight: bold;
		margin-top: rem-calc(20);

		@include breakpoint(large) {
			@include large-text();
		}
	}

	&__body {
		margin-bottom: 2rem;
	}

	&__card1 {
		display: block;
		width: rem-calc(227);
		height: rem-calc(165);
		transform: rotate(-15deg);
	}

	&__card2 {
		display: block;
		width: rem-calc(254);
		height: rem-calc(154);
		transform:
			rotate(13deg)
			translateY(#{rem-calc(45)})
			translateX(#{rem-calc(70)});
	}
}
</style>

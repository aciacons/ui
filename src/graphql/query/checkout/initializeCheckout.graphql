#import '../../fragments/shopTotals.graphql'

query {
	my {
		userAccount {
			id
			balance
			promoBalance
		}
		lastActiveLogin: userSessionData(sessionKey: LastActiveLogin) {
			sessionKey
			data
		}
	}
	general {
		activeLoginDuration: setting(setting: "config.login_timeouts.www.active_login") {
			value
			key
		}
	}
	shop {
		basket {
			hasFreeCredits
			credits {
				totalCount
				values {
					amount
					applied
					available
					creditType
					id
				}
			}
			items {
				totalCount
				values {
					id
					price
					... on LoanReservation {
						expiryTime
						isEndingSoon
						loan {
							id
							name
							use
							status
							matchingText
							loanAmount
							plannedExpirationDate
							sector {
								name
							}
							geocode {
								country {
									name
								}
							}
							loanFundraisingInfo {
								isExpiringSoon
								fundedAmount
								reservedAmount
							}
							image {
								id
								url: url (presetSize: loan_thumbnail)
								url_2x: url (presetSize: loan_thumbnail_retina)
							}
							... on LoanDirect {
								sponsor_name: trusteeName
							}
							... on LoanPartner {
								sponsor_name: partnerName
							}
						}
						team {
							id
							name
						}
					}
					... on Donation {
						isTip
						isUserEdited
					}
					... on KivaCard {
						id
						price
						idsInGroup
						quantity
						individualPrice
						kivaCardObject {
							deliveryType
							recipient {
								name
								email
								scheduledDeliveryDate
							}
							mailingInfo {
								firstName
								lastName
								address
								city
								state
								zip
							}
						}
					}
				}
			}
			totals {
				...shopTotals
			}
		}
	}
}
